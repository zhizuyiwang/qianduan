##一、nodejs的安装、环境配置



##二、模块及nodeJs项目node_modules目录的详解
###1、模块概念及导入方式
- 在Node.js中，以模块为单位划分所有功能，并且提供了一个完整的模块加载机制，这时的我们可以将应用程序划分为各个不同的部分。不可能用一个js文件去写全部的业务
- 狭义的说，每一个JavaScript文件都是一个模块；而多个JavaScript文件之间可以相互require，他们共同实现了一个功能，他们整体对外，又称为一个广义上的模块。
-  Node.js中，一个JavaScript文件中定义的变量、函数，都只在这个文件内部有效。当需要从此JS文件外部引用这些变量、函数时，必须使用exports对象进行暴露，使用者要用require()命令引用这个JS文件。
-  一个JavaScript文件，可以向外exports无数个变量、函数。但是require的时候，仅仅需要require这个JS文件一次。使用的它的变量、函数的时候，用点语法即可。所以，无形之中，增加了一个顶层命名空间。

js文件中，可以用exports暴露很多东西，比如函数、变量。<br>
如，foo.js:

	var msg = "你好";
	var info = "呵呵";
	
	function showInfo(){
	    console.log(info);
	}
	
	exports.msg = msg;
	exports.info = info;
	exports.showInfo = showInfo;
在使用者中，只需要require一次。

	var foo = require("./test/foo.js");
相当于增加了顶层变量。所有的函数、变量都要从这个顶层变量走：

	console.log(foo.msg);
	console.log(foo.info);
	foo.showInfo();
Node中，js文件和js文件，就是被一个个exports和require构建成为网状的。
不是靠html文件统一在一起的。

- 可以在一个JavaScript文件中，描述一个类，用module.export = 构造函数名的方式向外暴露一个类。<br>

js文件和js文件之间有两种合作的模式：<br>
1） 某一个js文件中，提供了函数，供别人使用。 只需要暴露函数就行了； exports.msg=msg;<br>
2） 某一个js文件，描述了一个类。   module.exports = People;

###2、模块中的node_modules
- 如果在require命令中，这么写：<br>
var foo = require("foo.js");   //**没有写./， 所以不是一个相对路径,是一个特殊的路径。**<br>
那么Node.js将该文件视为node_modules目录下的一个文件。
- node`_`modules文件夹并不一定在同级目录里面，**在任何直接祖先级目录中都可以**。甚至可以放到NODE_PATH环境变量的文件夹中,这样做的好处：分享项目的时候，不需要带着modules一起给别人。
- **我们可以使用文件夹来管理模块，比如<br>
var bar = require("foo"); 
那么Node.js将会去寻找node_modules目录下的bar文件夹中的index.js去执行**。
- 每一个模块文件夹中，推荐都写一个package.json文件，这个文件的名字不能改。node将自动读取里面的配置，有一个main项，就是入口文件：
	
		{
		  "name": "foo",
		  "version": "1.0.1",
		  "main" : "foo.js"
		}
**这样执行var foo = require("foo")时，会导入foo模块文件夹中的foo.js文件。<br>
package.json文件，要放到模块文件夹的根目录去。**


###3、npm社区——[https://www.npmjs.com/](https://www.npmjs.com/ "npm社区——寻找需要的功能模块")
模块就是一些功能的封装，所以一些成熟的、经常使用的功能，都有人封装成为了模块。并且放到了社区中，供人免费下载。这个伟大的社区，叫做npm，也是一个工具名字  node package management。<br>

- **npm的主要职责是安装开发包和管理依赖项**
- **安装开发包，使用npm install命令就可以安装，模块名字全球唯一；更新，使用npm update命令**
- **管理依赖项，借助package.json文件。最简单生成package.json的方法就是npm init，在一个文件夹中使用此命令可以使此文件夹变为nodejs项目** 

存在的问题：<br>

1. 我们的依赖包，可能在随时更新，我们永远想保持更新，或者某持某一个版本
2. 项目越来越大的时候，给别人看的时候，没有必要再次共享我们引用的第三方模块。

因此我们可以用package.json来管理依赖。在cmd中，使用npm init可以初始化一个package.json文件，用回答问题的方式生成一个新的package.json文件。<br>
**注意：在项目中通过npm init生成一个package.json文件后，就可以在和package.json文件一致的目录中通过执行npm install命令把package.json声明的所有依赖模块下载下来，并下载到node`_`modules中，若node_modules文件夹不存在，则创建出来。一般在提交到git中时，把node	`_`modules文件夹忽视，只上传package.json文件即可**

###4、require导入文件路径和fs读取文件路径
- require()别的js文件的时候，将执行那个js文件。
- require()中的路径，是从当前这个js文件出发，找到别人。而fs是从命令提示符找到别人。

如：桌面上有一个a.js， test文件夹中有b.js、c.js、1.txt。<br>
a要引用b：<br>

	var b = require(“./test/b.js”);
b要引用c：<br>

	var b = require(“./c.js”);

但是，fs等其他的模块用到路径的时候，都是相对于cmd命令光标所在位置。所以，在b.js中想读1.txt文件，推荐用绝对路径

	fs.readFile(__dirname + "/1.txt",function(err,data){
		if(err) { throw err; }
		console.log(data.toString());
	});
__dirname就是当前文件的绝对路径
##三、升级npm和node的方式
1. [https://www.cnblogs.com/ifannie/p/8995585.html](https://www.cnblogs.com/ifannie/p/8995585.html)
2. npm 更新至最新版本<br>[https://www.imooc.com/article/15800](https://www.imooc.com/article/15800 "npm 更新至最新版本")

		今天搭建vue-cli 脚手架，install 所有依赖之后，运行 npm run dev 报错，提示我当前npm用的版本号过低。需要升级npm版本大于某个版本。
		百度搜索如何更新npm至最新版本。
		90%的解决方案是让我们再用npm全局安装一遍npm，就可以更新至最新版本了。
		即：
		
		npm install -g npm
		但是，我尝试之后 查看npm当前版本
		
		npm -v
		
		显示的仍然是当前版本。
		npm 还有个命令是 update， 于是看了下官方文档：
		
		npm update [-g] [<pkg>...]
		
		于是尝试使用该命令：
		
		npm update -g npm
		之后仍然是无效。
		最后去 npm 的官网
		发现使用如下命令：
		
		npm install npm@latest -g
		
		可以更新npm至最新版本。
		其中 @ 符号后面可以添加你想更新到的版本号。

##四、npm、cnpm和yarn
1. Node.js npm 详解<br>[https://www.cnblogs.com/libin-1/p/5907175.html](https://www.cnblogs.com/libin-1/p/5907175.html "Node.js npm 详解")

2. npm设置淘宝镜像

		npm config set registry https://registry.npm.taobao.org --global
		npm config set disturl https://npm.taobao.org/dist --global
3. 安装yarn，并设置淘宝镜像

		npm install -g yarn
		yarn config set registry https://registry.npm.taobao.org --global
		yarn config set disturl https://npm.taobao.org/dist --global

		安装完 yarn 之后就可以用 yarn 代替 npm 了，例如用yarn代替npm install --save命令，用yarn add 某第三方库名代替npm install 某第三方库名 --save
4. yarn和npm的区别对比_比较npm和yarn 命令行<br>[http://www.fly63.com/article/detial/554](http://www.fly63.com/article/detial/554 "yarn和npm的区别对比_比较npm和yarn 命令行")
		
		npm
		npm 是目前js最流行的包管理工具,也是Node.js能够如此成功的主要原因之一。通过 npm 可以安装、共享、分发代码,管理项目依赖关系。
	    npm 由三个独立的部分组成：
		
		网站 （package）
		注册表（registry）
		命令行工具 (CLI)
		网站是开发者查找包（package）、设置参数以及管理 npm 使用体验的主要途径。 注册表 是一个巨大的数据库，保存了每个包
		(package）的信息。 CLI 通过命令行或终端运行。开发者通过 CLI 与 npm 打交道。
		
		
		yarn
		Yarn 是为了弥补 npm 的一些缺陷而出现的， 它是由Facebook, Google, Exponent and Tilde开发者共同开发完成，Yarn 定位
		为"快速、可靠、安全的依赖管理工具"。
		
		
		yarn对比npm的优点 :

		1、离线模式： yarn会有一个缓存目录，会缓存以前安装过的软件包，再次安装时就不必从网络下载了，大大加速安装速度。
		
		2、依赖关系确定性： 生成的依赖关系顺序和版本是一致的。
		
		3、网络性能优化： 下载软件时会优化请求顺序，避免请求瀑布发生
		
		4、网络回弹： yarn在某个安装包请求失败时不会导致安装失败，它会自动去尝试重新安装。而npm则会毫不犹豫的失败，导致得再来一次，耗费时间
		
		5、多注册来源： 所有的依赖包，不管他被不同的库间接关联引用多少次，安装这个包时，只会从一个注册来源去装，要么是 npm 要么是
		bower, 防止出现混乱不一致。
		
		6、扁平模式： 对于多个包依赖同一个子包的情况，yarn会尽量提取为同一个包，防止出现多处副本，浪费空间。比如1.2中，yarn会为
		babel-generator和babel-helper-define-map 创建同一个lodash子依赖，这样就节约一份的空间。 



		1、npm 与 yarn 命令对比

			npm	                                				yarn
			npm install	       									yarn install
			(N/A)	           									yarn install --flat
			(N/A)	          			   						yarn install --har
			(N/A)	           									yarn install --no-lockfile
			(N/A)	           									yarn install --pure-lockfile
	
			npm install [package]								(N/A)
			npm install --save [package]						yarn add [package]
			npm install --save-dev [package]					yarn add [package] [--dev/-D]
			(N/A)												yarn add [package] [--peer/-P]
			npm install --save-optional [package]				yarn add [package] [--optional/-O]
			npm install --save-exact [package]					yarn add [package] [--exact/-E]
			(N/A)												yarn add [package] [--tilde/-T]
			npm install --global [package]						yarn global add [package]
			npm rebuild											yarn install --force
	
			npm uninstall [package]								(N/A)
			npm uninstall --save [package]						yarn remove [package]
			npm uninstall --save-dev [package]					yarn remove [package]
			npm uninstall --save-optional [package]				yarn remove [package]
	
			npm cache clean										yarn cache clean
			rm -rf node_modules && npm install					yarn upgrade

		初始化项目
		npm  init
		yarn init

		从 package.json 安装依赖
		npm install
		yarn

		安装指定包到依赖或者开发依赖
		npm install --save [package]
		yarn add [package]
		npm install --save-dev [package]
		yarn add [package] [--dev/-D]

		安装包到全局
		npm install --global [package]
		yarn global add [package]

		安装指定版本的包
		npm install [package]@[version]
		yarn add [package]@[version]

		重新下载所有包
		npm reubild
		yarn install --force

		卸载包
		npm uninstall [package]
		npm uninstall --save [package]
		yarn remove [package]
		npm uninstall --save-dev [package]

		升级包
		rm -rf node_modules && npm install
		yarn upgrade

	



##五、PyCharm的常用功能

1. 配置NodeJs智能提示
2. 编写方法模板
3. 导入模块
